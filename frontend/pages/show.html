<!DOCTYPE html>
<html lang="en">

<head>
	<include src="head.html" title="Halloween Show Editor" description="Edit lights and lasers for a song display" />

	<include src="show/display.css" />
	<include src="show/timeline.css" />
</head>

<body>
	<div id="ShowVertContainer">
		<div id="ShowHorzContainer">
			<div id="display">
				<include src="show/lasers.css" />
				<div id="lasers">
					<div id="laser-1" class="laser selected"><div></div></div>
					<div id="laser-2" class="laser"><div></div></div>
					<div id="laser-3" class="laser"><div></div></div>
				</div>

				<include src="show/lights.css" />
				<div id="lights">
					<div id="light-1" class="light"><div></div></div>
					<div id="light-2" class="light"><div></div></div>
					<div id="light-3" class="light"><div></div></div>
					<div id="light-4" class="light"><div></div></div>
					<div id="light-5" class="light"><div></div></div>
					<div id="light-6" class="light"><div></div></div>
					<div id="light-7" class="light"><div></div></div>
				</div>
			</div>
			<canvas id="minimap"></canvas>
			<div id="timeline">
				<div id="timelineEvents"></div>
				<div id="timelineBackground"></div>
			</div>
		</div>
	</div>

	<include src="show/metadata.js" />
	<include src="show/device.js" />
	<include src="show/timeline.js" />

	<!-- Setup Functions -->
	<script>
		document.addEventListener("click", function(){
			window.device.select();
		});
	</script>

	<!-- Usage Functions -->
	<script>
	</script>

	<!-- Device initialization -->
	<script>
		window.device.addType("binary", {
			edit: function () {

			}
		});
		window.device.addType("float", {
			edit: function () {

			}
		});

		window.device.addDevice("laser", "binary", document.querySelector("#laser-1"));
		window.device.addDevice("laser", "binary", document.querySelector("#laser-2"));
		window.device.addDevice("laser", "binary", document.querySelector("#laser-3"));

		window.device.addDevice("light", "float", document.querySelector("#light-1"), "438f65");
		window.device.addDevice("light", "float", document.querySelector("#light-2"), "438f65");
		window.device.addDevice("light", "float", document.querySelector("#light-3"), "438f65");
		window.device.addDevice("light", "float", document.querySelector("#light-4"), "438f65");
		window.device.addDevice("light", "float", document.querySelector("#light-5"), "438f65");
		window.device.addDevice("light", "float", document.querySelector("#light-6"), "438f65");
		window.device.addDevice("light", "float", document.querySelector("#light-7"), "438f65");

		window.timeline.init();
		window.timeline.render();

		console.log(window.timeline.ele.background_columns);
		setInterval(function(){
			window.timeline.ele.background_columns[window.timeline.view.index].classList.toggle("active", false);
			window.timeline.view.index = (window.timeline.view.index + 1) % window.timeline.view.max;
			window.timeline.ele.background_columns[window.timeline.view.index].classList.toggle("active", true);
		}, 200);
	</script>

	<!-- Display Setup -->
	<script>

	</script>
</body>

</html>